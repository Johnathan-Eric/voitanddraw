<?php
 goto jyuug; CNX3V: function card_group_discount($store_id) { goto v1O7_; vRCYw: if ($AwrEz) { goto Q1Fz7; } goto apOsj; Q2kcy: if ($Zn33S) { goto PyAwT; } goto pd26t; KKZQv: return $discount_info; goto Fe2yW; gdRY3: if ($nTWgN) { goto XReO2; } goto h7ZEa; nV1P4: if ($I2ogi) { goto xfNDS; } goto QG2Ll; s4Bnf: $storex_discount_set = pdo_get("\x73\x74\x6f\x72\x65\x78\137\x64\151\x73\x63\x6f\x75\x6e\x74\137\x73\145\x74", array("\x75\x6e\151\141\143\151\144" => $_W["\x75\156\151\x61\143\151\x64"], "\x73\164\x6f\162\x65\151\x64" => $store_id)); goto KZhKS; ndNzX: $discount_info["\144\151\x73\x63\x6f\x75\156\x74\137\x74\171\x70\x65"] = $storex_discount_set["\x73\164\141\164\165\x73"]; goto KKZQv; KZhKS: $AwrEz = !(!empty($storex_discount_set) && !empty($storex_discount_set["\x73\164\x61\x74\x75\x73"])); goto vRCYw; QG2Ll: $nTWgN = empty($storex_discount_set["\144\151\x73\143\157\x75\x6e\x74"][$mem_group_id]); goto gdRY3; rfY4p: PyAwT: goto uEQlY; v1O7_: global $_W; goto s4Bnf; apOsj: $Zn33S = empty($storex_discount_set["\x64\x69\x73\x63\x6f\165\156\x74"]); goto Q2kcy; TmuZk: $mem_group_id = card_mmeber_group_id($store_id); goto Oy2KZ; Fe2yW: XReO2: goto lAMdp; h7ZEa: $discount_info = $storex_discount_set["\x64\151\163\143\157\x75\x6e\164"][$mem_group_id]; goto ndNzX; lAMdp: xfNDS: goto rfY4p; pd26t: $storex_discount_set["\x64\x69\163\143\157\x75\x6e\164"] = iunserializer($storex_discount_set["\144\x69\x73\143\x6f\165\x6e\164"]); goto TmuZk; Oy2KZ: $I2ogi = empty($mem_group_id); goto nV1P4; uEQlY: Q1Fz7: goto MPuOl; MPuOl: } goto GzLzH; raxi8: function card_return_credit_info($uid = '') { goto CwCK3; JlrEW: $cardActivity = $card_info["\x70\x61\x72\x61\x6d\163"]["\143\x61\x72\144\101\143\164\151\166\x69\164\171"]["\x70\x61\162\141\155\163"]; goto Mutl_; G1sOv: $card_info = card_setting_info(); goto JlrEW; SiNoX: PQaG_: goto ihxVI; fdhKu: $uid = mc_openid2uid($_W["\157\x70\145\156\151\x64"]); goto SiNoX; JkIAg: return $cardActivity; goto EIE2R; M0nW8: j8OHK: goto G1sOv; EIE2R: IM2tB: goto n0Yi_; NFKCA: goto WH9hb; goto V3fQI; Mutl_: if ($card_info["\x70\141\x72\x61\155\163"]["\x63\141\162\144\122\x65\143\150\x61\162\147\x65"]["\x70\141\162\141\155\163"]["\x72\x65\143\150\141\162\147\145\x5f\x74\x79\160\x65"] == 1) { goto b3gW9; } goto MvmcV; Ggmp_: Lzec4: goto JkIAg; HUQwt: $CkSas = !empty($uid); goto vZnCm; AZa9b: return ''; goto M0nW8; Z5yFh: if ($FBeF_) { goto j8OHK; } goto AZa9b; tHbN1: goto IM2tB; goto Ggmp_; CwCK3: global $_W; goto HUQwt; V3fQI: b3gW9: goto hyjkl; ZvJeR: return ''; goto tHbN1; MvmcV: return $cardActivity; goto NFKCA; vZnCm: if ($CkSas) { goto PQaG_; } goto fdhKu; ihxVI: $FBeF_ = pdo_get("\x73\x74\157\x72\145\x78\x5f\x6d\143\137\x63\141\162\144\137\155\145\x6d\x62\x65\162\x73", array("\165\156\x69\141\143\x69\144" => $_W["\165\156\x69\x61\x63\151\x64"], "\x75\x69\x64" => $uid), array("\x69\144")); goto Z5yFh; n0Yi_: WH9hb: goto BtDXB; hyjkl: if ($card_info["\160\x61\162\141\155\x73"]["\x63\141\162\144\122\145\x63\x68\x61\x72\147\x65"]["\x70\x61\x72\141\155\x73"]["\x67\162\141\x6e\x74\x5f\x72\x61\x74\x65\x5f\163\167\x69\164\x63\x68"] == 1) { goto Lzec4; } goto ZvJeR; BtDXB: } goto UEZ6M; suUnF: function card_notices() { goto Z8qIi; M4J2i: $notices = pdo_getall("\163\x74\x6f\x72\x65\x78\x5f\156\x6f\x74\x69\x63\145\163", array("\165\156\x69\x61\143\x69\144" => intval($_W["\165\156\x69\141\143\x69\144"]), "\x74\x79\160\145" => 1), array(), "\151\144", "\x61\x64\144\164\x69\x6d\145\40\104\105\123\x43"); goto oQFJn; rOn8B: fkD1C: goto cF1dm; XEMMS: $read_record = pdo_getall("\163\164\x6f\162\145\170\x5f\156\x6f\164\x69\x63\x65\x73\x5f\165\156\x72\145\141\x64", array("\x75\x69\144" => $uid, "\165\x6e\151\x61\x63\151\x64" => intval($_W["\165\x6e\151\141\143\x69\144"]), "\156\x6f\x74\x69\x63\x65\x5f\151\144\40\x49\x4e" => $notice_ids)); goto kFn4n; cF1dm: SNKXo: goto VG22l; iKzT1: foreach ($notices as $k => &$info) { goto bEBUT; bEBUT: $SJyhn = empty($info["\147\x72\x6f\165\160\151\144"]); goto BJcax; wjfIH: yEKEX: goto IlFZ6; MjD6_: tJNBd: goto nhztQ; ZaMko: if ($lnJUb) { goto yEKEX; } goto qwCwM; IlFZ6: $notice_ids[] = $info["\x69\x64"]; goto zjeEr; yItt1: $HmORX = !(empty($members["\147\x72\x6f\165\x70\x69\144"]) || $info["\x67\162\157\165\160\151\144"] != $members["\147\x72\157\x75\x70\x69\x64"]); goto ia_YE; ia_YE: if ($HmORX) { goto KTOeX; } goto u00SB; jmGGU: $info["\x61\144\144\164\151\x6d\145"] = date("\x59\x2d\155\x2d\144", $info["\x61\144\x64\164\151\x6d\145"]); goto VzejK; C9JZQ: KTOeX: goto MjD6_; zjeEr: D377a: goto YDcC2; u00SB: unset($notices[$k]); goto C9JZQ; VzejK: $lnJUb = empty($info["\x74\150\x75\x6d\142"]); goto ZaMko; nhztQ: $info["\x72\x65\141\144\x5f\163\164\x61\164\165\x73"] = 0; goto jmGGU; BJcax: if ($SJyhn) { goto tJNBd; } goto yItt1; qwCwM: $info["\x74\x68\165\x6d\142"] = tomedia($info["\x74\150\x75\155\142"]); goto wjfIH; YDcC2: } goto zbC5y; VG22l: return $notices; goto saBc5; zbC5y: ev0aA: goto wqd_m; wqd_m: unset($info); goto XEMMS; kFn4n: $Pgbhc = empty($read_record); goto oCE4T; we8Bq: if ($YID11) { goto SNKXo; } goto u7evy; dCWCH: eQwkq: goto rOn8B; YxH27: $notice_ids = array(); goto iKzT1; vXtGg: foreach ($read_record as $val) { goto exOkJ; WBFbD: z4PzW: goto MWrpC; jJ6FW: if ($zPvkg) { goto z4PzW; } goto nbU6v; exOkJ: $zPvkg = empty($notices[$val["\x6e\x6f\x74\151\x63\x65\137\151\144"]]); goto jJ6FW; nbU6v: $notices[$val["\x6e\x6f\164\151\x63\x65\137\151\144"]]["\162\145\141\x64\137\163\x74\141\x74\165\163"] = 1; goto WBFbD; MWrpC: ri4AL: goto dvbfB; dvbfB: } goto dCWCH; QheVU: $uid = mc_openid2uid($_W["\x6f\x70\x65\156\x69\x64"]); goto M4J2i; u7evy: $members = pdo_get("\x6d\143\137\x6d\x65\155\142\145\x72\x73", array("\x75\x69\x64" => $uid), array("\x67\x72\157\x75\160\x69\144")); goto YxH27; Z8qIi: global $_W, $_GPC; goto QheVU; oCE4T: if ($Pgbhc) { goto fkD1C; } goto vXtGg; oQFJn: $YID11 = empty($notices); goto we8Bq; saBc5: } goto OWiEs; ug7Ax: function card_group_id($uid) { goto mFu8W; SSXHy: return $group_info; goto neZJB; mFu8W: global $_W; goto P_tif; lOQkE: $group_info = pdo_get("\x6d\143\x5f\x67\162\157\165\160\163", array("\147\162\157\x75\160\x69\144" => $members["\147\x72\x6f\x75\x70\151\144"])); goto SSXHy; neZJB: VA11A: goto R29lZ; R29lZ: eC26W: goto Fw28q; xET9Z: if ($BvbMf) { goto VA11A; } goto lOQkE; iSfO4: $BvbMf = empty($storex_member); goto xET9Z; drCcE: $XFrOY = empty($members["\x67\x72\x6f\165\160\151\144"]); goto I_ABB; P_tif: $members = pdo_get("\155\143\x5f\155\145\155\142\x65\162\x73", array("\x75\151\144" => $uid), array("\147\x72\157\165\160\151\x64")); goto drCcE; Y82Zp: $storex_member = pdo_get("\163\x74\157\x72\x65\170\x5f\x6d\x63\x5f\x63\x61\x72\144\x5f\x6d\145\x6d\142\x65\162\163", array("\165\x69\144" => $uid)); goto iSfO4; I_ABB: if ($XFrOY) { goto eC26W; } goto Y82Zp; Fw28q: } goto CNX3V; yfqBj: function card_discount_price($store_id, $price) { goto aJH6L; Ki24t: cU8eE: goto kmJ8M; PvZep: $price *= $discount["\x64\151\163\143\x6f\x75\x6e\164\x5f\x32"] * 0.1; goto VF0s3; zcYh6: goto who3w; goto Iv1Hh; YqWJc: $price -= $discount["\x64\151\163\143\157\165\156\x74\137\x31"]; goto Ki24t; oQc0R: if ($BZByH) { goto ZyQhj; } goto JmAMj; cBt1B: $dmR7s = !($price > $discount["\x64\151\x73\x63\157\x75\156\164\137\61"]); goto yzU5A; GoUj3: if ($discount["\x64\151\x73\143\157\x75\x6e\164\137\164\x79\x70\x65"] == 1) { goto n6Mx3; } goto nCrGE; nCrGE: if ($discount["\144\x69\x73\x63\157\x75\x6e\164\x5f\164\171\x70\x65"] == 2) { goto xdPcg; } goto zcYh6; Iv1Hh: n6Mx3: goto tThkw; LcOBn: ZyQhj: goto G5i23; G5i23: who3w: goto TRd6j; izfkt: if ($f8I_r) { goto BocxB; } goto cBt1B; MzJEM: goto who3w; goto JT0DV; tThkw: $f8I_r = !($price >= $discount["\x63\x6f\x6e\x64\151\164\x69\157\156\x5f\x31"]); goto izfkt; CaHL2: return $price; goto IVLcd; aJH6L: $discount = card_group_discount($store_id); goto GoUj3; JmAMj: $DsSub = !($discount["\144\x69\163\x63\x6f\x75\156\164\137\62"] != 0 && $discount["\144\x69\x73\143\157\165\x6e\164\137\x32"] > 0); goto wC26w; kmJ8M: BocxB: goto MzJEM; VF0s3: dkdtZ: goto LcOBn; O0G1h: $BZByH = !($price >= $discount["\143\x6f\156\x64\151\164\x69\x6f\156\x5f\62"]); goto oQc0R; TRd6j: $price = sprintf("\x25\x31\56\62\146", $price); goto CaHL2; JT0DV: xdPcg: goto O0G1h; wC26w: if ($DsSub) { goto dkdtZ; } goto PvZep; yzU5A: if ($dmR7s) { goto cU8eE; } goto YqWJc; IVLcd: } goto ug7Ax; OWiEs: function card_info_exist($data) { goto Dw55l; X5OVZ: Bwza2: goto vI7mm; vI7mm: jQGqa: goto JkVY1; Dw55l: global $_W; goto JHCwu; g3pKU: eQszt: goto Jl1CD; Ut_Zk: if ($ukJJB) { goto z9p2e; } goto fbI3k; CyKI9: message(error(-1, "\xe6\211\x8b\346\234\272\xe5\217\267\xe5\xb7\xb2\350\242\xab\346\xb3\xa8\345\206\214"), '', "\x61\152\141\170"); goto X5OVZ; ubKOf: z9p2e: goto g3pKU; k0bSe: $isexist = pdo_fetchcolumn("\x53\105\x4c\105\x43\x54\x20\x43\117\x55\116\124\x28\x2a\51\40\x46\x52\117\115\40" . tablename("\163\x74\x6f\x72\x65\x78\137\x6d\x63\137\143\141\x72\144\x5f\155\145\x6d\142\145\x72\x73") . "\x20\x57\x48\x45\x52\x45\40\x75\156\x69\141\x63\x69\x64\40\x3d\x20\72\165\156\151\141\x63\x69\144\40\x41\116\x44\x20\x65\x6d\141\151\154\40\x3d\x20\x3a\x65\155\x61\x69\154\40\101\x4e\x44\40\165\151\x64\x20\x21\75\40\x3a\165\x69\144", array("\x3a\165\x6e\151\141\x63\x69\144" => $_W["\165\x6e\151\x61\x63\x69\x64"], "\x3a\145\155\x61\x69\x6c" => $email, "\x3a\x75\151\x64" => $uid)); goto jZbuK; Q4d5b: $email = trim($data["\145\155\141\x69\x6c"]); goto k0bSe; pqqRU: if ($sjdbv) { goto jQGqa; } goto Esfnq; jZbuK: $ukJJB = !($isexist >= 1 && card_check_uid($uid, "\145\x6d\141\151\154", $email)); goto Ut_Zk; Esfnq: $mobile = trim($data["\x6d\x6f\x62\151\154\145"]); goto cP_Uw; Wibl0: if ($sRzsN) { goto Bwza2; } goto CyKI9; OUz0D: $sRzsN = !($isexist >= 1 && card_check_uid($uid, "\x6d\x6f\x62\x69\x6c\x65", $mobile)); goto Wibl0; Jl1CD: $sjdbv = empty($data["\x6d\157\x62\151\x6c\x65"]); goto pqqRU; AyqTV: if ($Ib7VO) { goto eQszt; } goto Q4d5b; JHCwu: $uid = mc_openid2uid($_W["\x6f\160\145\x6e\x69\144"]); goto Un4A2; fbI3k: message(error(-1, "\xe9\x82\xae\347\256\261\345\267\xb2\350\242\253\xe6\xb3\250\xe5\x86\214"), '', "\141\152\x61\170"); goto ubKOf; cP_Uw: $isexist = pdo_fetchcolumn("\123\105\x4c\x45\103\x54\x20\103\x4f\125\116\124\x28\52\51\x20\106\122\x4f\x4d\40" . tablename("\x73\164\157\x72\145\170\x5f\155\143\137\143\x61\162\144\137\155\145\155\x62\x65\x72\x73") . "\x20\x57\110\105\122\105\40\x75\x6e\x69\x61\143\x69\x64\x20\x3d\40\72\165\156\151\141\x63\x69\x64\40\x41\x4e\104\40\155\x6f\x62\151\x6c\x65\40\x3d\x20\x3a\x6d\157\142\x69\x6c\x65\40\101\x4e\x44\40\x75\x69\144\40\41\75\40\72\165\151\144", array("\72\x75\x6e\151\x61\x63\151\144" => $_W["\165\156\x69\x61\x63\x69\x64"], "\72\155\x6f\x62\151\154\145" => $mobile, "\x3a\165\x69\144" => $uid)); goto OUz0D; Un4A2: $Ib7VO = empty($data["\145\155\141\x69\154"]); goto AyqTV; JkVY1: } goto MuwMb; jyuug: function card_sign_operation($sign_data, $sign_day, $cost = array(), $type = '') { goto CV7jb; ZykRM: if (!empty($insert_id)) { goto av6wE; } goto RUv9G; kbnCF: VDLFE: goto fLsjF; VJvu2: if ($UB9DK) { goto ayl1E; } goto fi40S; LegvD: $tip2 = "\xe8\241\245\347\xad\276\xe6\210\220\345\x8a\237\xef\274\x8c\xe8\x8e\267\345\xbe\227" . $sign_data["\163\x69\147\156"]["\145\166\x65\x72\x79\144\x61\x79\156\x75\155"] . "\xe7\247\xaf\xe5\210\206"; goto u06Rn; NcJBv: av6wE: goto I10pD; GiBRA: EF3Dz: goto unbMi; K6wwY: $uid = mc_openid2uid($_W["\157\160\x65\x6e\x69\144"]); goto xkS84; OXdPO: $insert_id = pdo_insertid(); goto ZykRM; BDmgL: $tip1 = "\347\xad\xbe\xe5\210\xb0\350\x8e\xb7\xe5\276\x97\xe7\xa7\257\345\210\x86" . $sign_data["\163\x69\147\x6e"]["\145\x76\145\162\x79\144\141\171\x6e\165\155"]; goto qmMbZ; lCZhO: message(error(-1, "\xe7\xa7\xaf\xe5\210\206\xe4\xb8\x8d\xe8\266\xb3\357\xbc\x8c\350\241\xa5\xe7\255\xbe\xe5\xa4\261\350\264\xa5\xef\xbc\x81"), '', "\141\152\141\170"); goto GiBRA; XEOkR: $sign_info = $sign_data["\163\151\147\x6e\x73"][$sign_day]; goto K6wwY; Hw9ac: OSeTc: goto tkPkZ; qmMbZ: $tip2 = "\347\xad\xbe\xe5\210\xb0\346\210\220\xe5\x8a\x9f\xef\274\214\xe8\216\xb7\345\xbe\x97" . $sign_data["\163\x69\147\x6e"]["\145\x76\x65\162\x79\144\x61\171\156\x75\x6d"] . "\347\247\xaf\345\210\x86"; goto Doi7j; I10pD: mc_credit_update($uid, "\143\162\x65\144\151\x74\61", $sign_info["\143\x72\145\144\x69\164"], array("\x30", $tip1, "\x77\156\137\x73\164\x6f\162\145\x78", 0, 0, 1)); goto xwgXX; h8_c_: $tip1 = "\xe8\241\xa5\xe7\255\276\xe8\x8e\267\xe5\xbe\227\347\xa7\xaf\345\x88\206" . $sign_data["\x73\x69\x67\x6e"]["\x65\166\145\162\x79\144\141\171\x6e\165\155"]; goto LegvD; yv0yM: goto Wz7BE; goto crco5; Doi7j: $tip3 = "\347\255\276\345\x88\260\345\244\xb1\xe8\264\xa5\xef\xbc\201"; goto dgOGw; u06Rn: $tip3 = "\350\241\245\347\xad\xbe\xe5\244\xb1\xe8\xb4\xa5\357\xbc\201"; goto kbnCF; dgOGw: goto VDLFE; goto Hw9ac; yxA1L: $insert_record = $insert_extra = array("\x75\156\x69\141\x63\151\144" => intval($_W["\x75\156\x69\141\x63\151\144"]), "\165\151\x64" => $uid, "\x63\162\x65\x64\x69\x74" => $sign_data["\163\x69\147\x6e"]["\x65\166\145\162\x79\144\141\x79\x6e\165\155"], "\x61\x64\144\164\151\155\145" => TIMESTAMP, "\171\x65\x61\x72" => date("\x59"), "\x6d\157\x6e\164\x68" => date("\156"), "\144\141\171" => $sign_day); goto sDP2b; unbMi: ayl1E: goto h8_c_; thNmd: goto fKk_s; goto NcJBv; sDP2b: $gH1mA = empty($sign_data["\x67\x72\x6f\165\x70"]); goto n6tMV; crco5: gqgaw: goto XRDkM; cK3vE: if ($type == "\162\145\155\145\144\x79") { goto OSeTc; } goto BDmgL; tkPkZ: $insert_record["\162\145\x6d\145\144\x79"] = 1; goto c33ob; qZIZz: pDgs0: goto S5ktW; XRDkM: message(error(-1, "\xe5\267\262\347\xbb\217\347\xad\276\350\xbf\207\xe4\xba\x86\357\xbc\214\346\x98\216\345\244\xa9\345\x86\215\346\235\xa5\345\x90\xa7\357\274\x81"), '', "\141\x6a\141\x78"); goto Xmrwa; CV7jb: global $_W, $_GPC; goto XEOkR; S5ktW: T0jdA: goto cK3vE; LujPO: $TNS5G = !is_array($return); goto tYRCh; xwgXX: message(error(0, $tip2), '', "\x61\x6a\141\x78"); goto Z0XiX; fLsjF: pdo_insert("\163\x74\157\162\145\170\x5f\x73\151\x67\156\137\x72\x65\143\x6f\x72\144", $insert_record); goto OXdPO; Z0XiX: fKk_s: goto yv0yM; xkS84: if ($sign_info["\x73\x74\141\164\165\x73"] == 1) { goto gqgaw; } goto yxA1L; c33ob: $UB9DK = empty($cost); goto VJvu2; jjArP: $return = mc_credit_update($uid, $cost["\x72\x65\x6d\145\x64\171\137\x63\x6f\x73\164\137\x74\171\160\x65"], -$cost["\162\145\x6d\145\x64\171\x5f\143\157\163\x74"], array("\x30", $tips, "\x77\156\137\163\164\157\162\x65\x78", 0, 0, 1)); goto LujPO; RUv9G: message(error(-1, $tip3), '', "\141\152\x61\x78"); goto thNmd; tYRCh: if ($TNS5G) { goto EF3Dz; } goto lCZhO; n6tMV: if ($gH1mA) { goto T0jdA; } goto Ipw71; fi40S: $tips = "\xe6\266\x88\xe8\264\xb9" . $cost["\162\145\x6d\145\144\x79\137\143\x6f\163\164"] . "\xe4\xbd\231\xe9\242\235\xef\274\214\xe8\241\xa5\347\255\276\347\xac\254" . $sign_day . "\xe5\244\251"; goto jjArP; Ipw71: foreach ($sign_data["\x67\x72\157\165\160"] as $k => $val) { goto SqBGA; QSMWw: $tipx = "\346\xbb\xa1\347\xad\xbe" . $sign_data["\163\151\x67\156"][$k] . "\xe5\xa4\251\xe9\x80\201" . $val . "\347\xa7\257\xe5\x88\x86"; goto T0q9U; Q1wts: wE40n: goto MydeB; vxIOP: if ($hRjf6) { goto ScHF3; } goto E7YLm; T0q9U: mc_credit_update($uid, "\143\x72\145\144\x69\x74\61", $val, array("\60", $tipx, "\x77\x6e\137\x73\164\157\x72\145\x78", 0, 0, 1)); goto rU584; rU584: pdo_insert("\x73\x74\157\x72\x65\x78\x5f\163\151\x67\x6e\x5f\x72\145\x63\x6f\x72\144", $insert_extra); goto tc0Jf; SqBGA: $hRjf6 = !($sign_data["\163\151\x67\156\x5f\144\x61\x79\163"] + 1 == $sign_data["\163\x69\x67\156"][$k] || $sign_data["\163\151\x67\x6e\137\144\x61\x79\163"] + 1 == date("\164") && $k == "\x66\165\x6c\x6c\x5f\x73\151\147\156\137\156\165\x6d"); goto vxIOP; cNb6W: ScHF3: goto Q1wts; E7YLm: $insert_extra["\162\x65\x6d\x65\x64\171"] = 2; goto QSMWw; tc0Jf: goto wE40n; goto cNb6W; MydeB: } goto qZIZz; Xmrwa: Wz7BE: goto Shzml; Shzml: } goto LUbkH; LUbkH: function card_sign_info($sign_max_day) { goto pY8bg; Axt2j: $no_sign = date("\164") - $sign_max_day; goto JPzHh; ba2fL: $sign_data["\x64\141\171"] = date("\152"); goto YEPhP; l0UaF: $sign_data["\x73\151\147\x6e\x73"][$i]["\x73\164\141\x74\x75\163"] = 2; goto fVDv3; fiJV4: $hD5tl = !($sign_days + $no_sign >= $sign["\x73\x65\143\x6f\156\144\137\x67\162\157\165\160\x5f\144\141\171"]); goto qCroJ; qZbzw: $sign_data["\x73\151\x67\156\137\x64\x61\171\x73"] = $sign_days; goto Nhggr; WiOZG: $sign_set = pdo_get("\163\164\157\162\x65\170\x5f\x73\x69\x67\156\x5f\x73\x65\164", array("\x75\x6e\151\x61\x63\151\x64" => intval($_W["\165\156\151\141\x63\151\x64"]))); goto e_nqb; zVPQb: if (!empty($sign_record[$i])) { goto KhUai; } goto l0UaF; KxUWw: $sign_data["\163\x69\147\156\163"][$i] = array("\143\x72\x65\x64\151\x74" => $sign["\145\166\x65\162\171\144\x61\x79\156\165\x6d"]); goto zVPQb; TK6Yo: vFFS1: goto iP_IY; VwKEF: gluSj: goto oYLQM; oYLQM: $sign_data["\x67\x72\157\x75\160"] = $group; goto qZbzw; ooTTR: $sign_data["\144\141\x79\x73"] = date("\164"); goto w4bny; PT1sZ: if ($w3nZd) { goto bA7mn; } goto rTb0u; JqelZ: igxtT: goto HpGc4; JPzHh: $group = array(); goto SRoFT; XNJ21: KhUai: goto vw2mF; rTb0u: $group["\146\x69\x72\163\x74\x5f\147\162\157\x75\160\x5f\144\141\x79"] = $sign["\146\x69\162\x73\x74\137\x67\162\x6f\x75\160\x5f\x6e\x75\155"]; goto EtEHp; EtEHp: bA7mn: goto fiJV4; HpGc4: $zBFqg = !($sign_days + $no_sign >= $sign["\x74\150\x69\162\x64\137\147\x72\x6f\x75\160\x5f\144\x61\x79"]); goto qcdTn; UMdTN: $uid = mc_openid2uid($_W["\157\x70\145\156\x69\x64"]); goto WiOZG; bLaPq: $sign_data = array(); goto y1EKC; Yq6IF: return $sign_data; goto xZl8x; qcdTn: if ($zBFqg) { goto BZGq8; } goto WVK_N; fVDv3: $DN2Lo = !($i > $sign_max_day); goto IeA88; y11_S: u7eQW: goto Yq6IF; qCroJ: if ($hD5tl) { goto igxtT; } goto FqRyN; G_Co9: SQ51a: goto EnFvO; y1EKC: $sign_data["\163\151\147\156"] = $sign; goto ooTTR; EnFvO: goto mpHjI; goto XNJ21; SRoFT: $w3nZd = !($sign_days + $no_sign >= $sign["\146\x69\162\x73\x74\x5f\147\x72\157\x75\160\137\x64\141\171"]); goto PT1sZ; Je1xI: mpHjI: goto TK6Yo; sAhxA: Q0LPo: goto Lh2Fv; w4bny: $sign_data["\155\157\x6e\164\150"] = date("\x6e"); goto ba2fL; bnWV1: $ad6Y8 = !($sign_days + $no_sign == date("\x74")); goto oZdmG; nagb2: goto Q0LPo; goto y11_S; iP_IY: $i++; goto nagb2; FHfiC: foreach ($group as $k => $val) { goto CuEV7; a2uIJ: ag0mS: goto mOBP_; ZLzCi: $sign_data["\163\151\x67\156\x73"][$i]["\x63\162\x65\x64\151\164"] += $val; goto yrje8; HkTg3: if ($K1_Bt) { goto ag0mS; } goto ZLzCi; mOBP_: SyYM9: goto pIoAt; CuEV7: $K1_Bt = !($i - $sign_max_day + $sign_days == $sign[$k] || $i - $sign_max_day + $sign_days == date("\x74") && $k == "\146\165\x6c\154\x5f\x73\x69\x67\x6e\x5f\x6e\x75\x6d"); goto HkTg3; yrje8: goto SyYM9; goto a2uIJ; pIoAt: } goto rwwEO; YEPhP: $sign_data["\x63\x6f\x6e\164\x65\x6e\164"] = $sign_set["\x63\x6f\x6e\164\x65\156\164"]; goto oHHwu; FqRyN: $group["\x73\145\143\x6f\156\x64\137\x67\x72\157\x75\x70\137\144\x61\171"] = $sign["\x73\x65\x63\x6f\x6e\144\x5f\x67\x72\x6f\x75\x70\137\x6e\x75\155"]; goto JqelZ; pY8bg: global $_W, $_GPC; goto UMdTN; oHHwu: $sign_data["\163\x69\147\x6e\163"] = array(); goto DI8Jv; hw91r: $group["\x66\165\154\154\x5f\x73\151\147\x6e\137\x6e\165\155"] = $sign["\146\x75\x6c\154\x5f\163\151\147\156\137\x6e\165\x6d"]; goto VwKEF; BRpVc: BZGq8: goto bnWV1; CVm_b: $sign_days = count($sign_record); goto Axt2j; Nhggr: $i = 1; goto sAhxA; rwwEO: gIzlJ: goto G_Co9; Lh2Fv: if (!($i <= $sign_data["\x64\141\x79\x73"])) { goto u7eQW; } goto KxUWw; vw2mF: $sign_data["\163\x69\147\156\163"][$i] = array("\143\x72\145\x64\x69\164" => $sign_record[$i]["\143\x72\145\144\x69\164"], "\x73\x74\141\164\x75\x73" => 1); goto Je1xI; IeA88: if ($DN2Lo) { goto SQ51a; } goto FHfiC; e_nqb: $sign = iunserializer($sign_set["\x73\x69\x67\x6e"]); goto bLaPq; oZdmG: if ($ad6Y8) { goto gluSj; } goto hw91r; DI8Jv: $sign_record = pdo_getall("\x73\x74\157\162\145\x78\x5f\163\x69\x67\156\x5f\x72\x65\143\157\x72\144", array("\x75\151\144" => $uid, "\171\145\x61\x72" => date("\131"), "\155\x6f\x6e\164\150" => date("\x6e"), "\x72\145\x6d\x65\144\x79\x20\x21\75" => 2), array(), "\144\x61\x79", "\144\141\x79\x20\101\x53\103"); goto CVm_b; WVK_N: $group["\164\150\151\x72\x64\137\147\162\x6f\x75\160\137\144\141\x79"] = $sign["\164\150\x69\x72\144\x5f\147\162\157\165\160\137\156\x75\155"]; goto BRpVc; xZl8x: } goto suUnF; MuwMb: function card_check_uid($uid, $type, $value) { goto cEQyd; kVbta: MTIFF: goto rNjCw; Zyo4X: EIRio: goto ui0i5; mb1VF: WEifS: goto kVbta; Vk1OH: foreach ($records as $val) { $uids[] = $val["\x75\151\x64"]; SSU_7: } goto HaqGM; cEQyd: global $_W; goto qkSoP; q75QK: foreach ($uids_info as $info) { goto UHCYR; AYnXG: TXNlW: goto yA9uG; Z_xVr: sacEU: goto AYnXG; qO7BE: return true; goto Z_xVr; xXi4A: if ($c4Gar) { goto sacEU; } goto qO7BE; UHCYR: $c4Gar = !($info["\x75\156\x69\141\x63\151\144"] == $fans_info["\165\x6e\151\141\x63\x69\x64"]); goto xXi4A; yA9uG: } goto mb1VF; S9pK3: $fans_info = cache_load($cachekey); goto fXRqi; StKIQ: if ($bOjii) { goto EIRio; } goto t4TwX; HaqGM: aDJ9I: goto LbVwb; LbVwb: $uids_info = pdo_getall("\x6d\x63\137\155\141\160\x70\151\156\x67\x5f\x66\141\x6e\x73", array("\165\151\x64" => $uids), array("\x75\156\151\141\x63\x69\144", "\165\x69\x64", "\157\160\145\156\151\144"), "\x75\151\144"); goto LT2PA; XoOvp: load()->model("\143\141\x63\150\x65"); goto VGYuo; VGYuo: $cachekey = cache_system_key("\x75\151\x64\72{$_W["\x6f\160\145\x6e\x69\x64"]}"); goto S9pK3; qkSoP: $bOjii = !in_array($type, array("\x65\155\x61\151\154", "\x6d\x6f\142\151\154\x65")); goto StKIQ; i3aGx: if ($UUsd6) { goto X4Hlt; } goto XoOvp; ymPZm: if ($TjPEm) { goto MTIFF; } goto q75QK; NJ5pQ: $UUsd6 = !(!empty($records) && is_array($records)); goto i3aGx; rNjCw: X4Hlt: goto Zyo4X; fXRqi: $uids = array(); goto Vk1OH; LT2PA: $TjPEm = !(!empty($uids_info) && is_array($uids_info)); goto ymPZm; t4TwX: $records = pdo_getall("\x73\x74\157\x72\x65\x78\x5f\x6d\143\x5f\143\x61\x72\x64\137\155\145\155\x62\x65\162\x73", array("\165\x6e\x69\141\x63\151\144" => $_W["\165\x6e\x69\141\x63\151\x64"], $type => $value, "\165\151\x64\x20\x21\75" => $uid), array("\165\x6e\151\141\x63\151\x64", "\165\151\144", "\x6f\160\145\x6e\x69\144")); goto NJ5pQ; ui0i5: } goto yfqBj; Foheu: function card_setting_info() { goto BWRv2; mz30X: if ($w6YOG) { goto Ou_a1; } goto Crte4; CYQld: return $cache; goto vI2u1; ih09f: $json_to_array = array("\143\157\x6c\157\162", "\142\141\x63\153\147\162\157\x75\x6e\x64", "\x66\151\x65\154\144\x73", "\x64\151\163\x63\x6f\165\156\164", "\147\x72\141\156\x74", "\x6e\x75\155\x73", "\x74\151\x6d\x65\163"); goto xhxRH; kd9Aw: $card_info = pdo_get("\x73\164\157\162\x65\x78\x5f\155\143\137\x63\x61\162\x64", array("\165\156\151\x61\x63\151\x64" => intval($_W["\x75\x6e\x69\141\x63\x69\144"]))); goto ECnso; PwuBj: tznK8: goto vQlz1; xhxRH: foreach ($json_to_array as $val) { goto Cpref; HGUjc: if ($oXOm9) { goto pWo8S; } goto IyE7z; Cpref: $oXOm9 = empty($card_info[$val]); goto HGUjc; lHogD: RepPZ: goto qTlJx; IyE7z: $card_info[$val] = iunserializer($card_info[$val]); goto XTfhu; XTfhu: pWo8S: goto lHogD; qTlJx: } goto PwuBj; qad0_: if ($GZCfy) { goto CVZu1; } goto CYQld; cwo4i: $GZCfy = empty($cache); goto qad0_; IMuk0: $cache = cache_load($cachekey); goto cwo4i; rs32k: if ($RHYfd) { goto b2wCc; } goto Oq0zB; O6iWl: Ou_a1: goto UBYUV; vI2u1: CVZu1: goto kd9Aw; BWRv2: global $_W; goto sa2ef; vQlz1: $w6YOG = empty($card_info["\160\141\x72\141\155\163"]); goto mz30X; UBYUV: cache_write($cachekey, $card_info); goto Pzo0d; Pzo0d: return $card_info; goto TvXV_; sa2ef: $cachekey = "\x77\156\x5f\x73\x74\x6f\162\145\170\137\x6d\x63\x5f\143\141\x72\x64\x5f\163\145\x74\x74\151\156\147\72{$_W["\x75\x6e\x69\141\x63\x69\144"]}"; goto IMuk0; ECnso: $RHYfd = !empty($card_info); goto rs32k; Crte4: $card_info["\x70\x61\162\x61\x6d\x73"] = json_decode($card_info["\160\x61\x72\x61\x6d\163"], true); goto O6iWl; FxZWp: b2wCc: goto ih09f; Oq0zB: return array(); goto FxZWp; TvXV_: } goto raxi8; GzLzH: function card_mmeber_group_id($store_id) { goto GtbeQ; se7kR: goto EH170; goto jpBRk; tPKTa: $gQLUY = empty($default_member_level); goto r1OYl; YOQvQ: $mem_group_id = $default_member_level["\x69\x64"]; goto TaLbW; h4ey5: $mem_group_id = $member["\155\145\x6d\x62\x65\162\x5f\147\162\x6f\x75\x70"][$store_id]; goto E0qYJ; S0Pca: $default_member_level = pdo_get("\x73\x74\x6f\162\145\x78\137\x6d\145\x6d\142\x65\x72\137\154\145\x76\145\154", array("\x75\156\151\141\143\x69\x64" => $_W["\x75\x6e\x69\x61\143\x69\x64"], "\x73\164\157\x72\145\151\x64" => $store_id, "\x67\137\144\145\x66\x61\165\x6c\x74" => 1)); goto tPKTa; Fm_E1: $TSVEb = !isset($member["\155\x65\x6d\x62\145\162\x5f\x67\162\157\165\x70"][$store_id]); goto CCK5g; emNWZ: EKREk: goto cbuN3; oFRp7: $AHiB0 = empty($member); goto wYd23; r1OYl: if ($gQLUY) { goto Xs_ZQ; } goto YOQvQ; ys6rT: $mem_group_id = ''; goto A01N4; ae_Ot: $member["\x6d\x65\x6d\142\x65\x72\137\x67\x72\157\x75\x70"] = iunserializer($member["\x6d\145\155\x62\145\x72\137\147\162\x6f\165\160"]); goto Fm_E1; A01N4: $member = pdo_get("\x73\x74\x6f\x72\x65\x78\137\155\145\x6d\142\x65\162", array("\x77\145\151\x64" => $_W["\165\156\x69\x61\x63\x69\144"], "\x66\162\x6f\155\137\165\x73\x65\x72" => $_W["\157\x70\145\x6e\x69\144"]), array("\151\x64", "\x6d\x65\x6d\142\145\162\137\147\162\157\x75\x70")); goto oFRp7; E0qYJ: jTuUY: goto Suq_t; jpBRk: EM5yG: goto ae_Ot; U6jsg: if (!empty($member["\155\x65\155\142\x65\162\137\x67\162\157\x75\160"])) { goto EM5yG; } goto S0Pca; Suq_t: EH170: goto emNWZ; wYd23: if ($AHiB0) { goto EKREk; } goto U6jsg; GtbeQ: global $_W; goto ys6rT; TaLbW: Xs_ZQ: goto se7kR; cbuN3: return $mem_group_id; goto fewzd; CCK5g: if ($TSVEb) { goto jTuUY; } goto h4ey5; fewzd: } goto Foheu; UEZ6M: function card_give_credit($uid, $sum_price) { goto uN0ft; k9XbL: $card_credit = card_return_credit_info($uid); goto nFOrg; S1GM_: return error(0, $num); goto GELjV; zXwWs: VaOkl: goto S1GM_; Z1MKZ: mc_credit_update($uid, "\x63\x72\x65\x64\x69\164\x31", $num, array("\60", $tips, "\167\x6e\x5f\163\x74\157\162\145\x78", 0, 0, 3)); goto zXwWs; LsL6v: $tips = "\347\224\250\346\210\xb7\346\266\x88\350\xb4\271{$sum_price}\345\205\203\357\274\x8c\346\224\257\344\273\230{$sum_price}\xef\274\214\344\xbc\x9a\345\221\x98\346\257\217\xe6\266\x88\xe8\264\271\61\xe5\x85\203\xe8\265\240\351\x80\201{$card_credit["\x67\x72\x61\156\x74\137\x72\141\x74\x65"]}\347\247\257\xe5\210\x86\x2c\345\x85\261\350\265\240\xe9\200\201\xe3\200\220{$num}\xe3\200\221\xe7\xa7\xaf\xe5\210\x86"; goto Z1MKZ; yQ9rC: if ($aSsyl) { goto VaOkl; } goto fOOb2; nFOrg: $aSsyl = empty($card_credit); goto yQ9rC; uN0ft: load()->model("\x6d\x63"); goto k9XbL; fOOb2: $num = floor($sum_price * $card_credit["\x67\x72\141\x6e\x74\x5f\x72\141\164\145"]); goto LsL6v; GELjV: }