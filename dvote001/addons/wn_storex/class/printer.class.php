<?php
 load()->func("\x63\157\155\x6d\165\x6e\151\x63\141\x74\151\157\x6e"); class Printer { private $user = ''; private $key = ''; private $sn = ''; private $times = 1; private $api = "\150\164\164\x70\x3a\57\57\x61\160\x69\56\x66\x65\x69\145\x79\x75\156\56\x63\156\x2f\101\160\x69\57\x4f\160\x65\x6e\57"; private $sig = ''; private $stime = TIMESTAMP; private $params = array(); public function __construct($user, $key, $sn) { goto WvjaK; WvjaK: $this->user = $user; goto yjFZn; uVKJN: $this->sn = $sn; goto mgZOa; yjFZn: $this->key = $key; goto uVKJN; mgZOa: $this->params = array("\165\163\145\162" => $user, "\163\x74\151\x6d\x65" => TIMESTAMP, "\163\151\x67" => sha1($user . $key . TIMESTAMP)); goto P8NCf; P8NCf: } public function printOrderAction($content, $times = 1) { goto XjqZW; c9SlQ: $this->params["\164\x69\155\x65\x73"] = $times; goto GmKhY; MsB78: $m_5Ld = !is_error($result); goto f6tdF; XjqZW: $this->params["\x73\x6e"] = $this->sn; goto BIyPR; AHL2_: $this->params["\x63\x6f\x6e\164\x65\x6e\x74"] = implode($content); goto c9SlQ; qU4m1: return $result; goto a8mUk; f6tdF: if ($m_5Ld) { goto M_J96; } goto gzzX1; BIyPR: $this->params["\141\160\x69\x6e\x61\155\145"] = "\117\x70\145\156\x5f\x70\x72\x69\156\164\115\x73\147"; goto AHL2_; GmKhY: $result = ihttp_post($this->api, $this->params); goto MsB78; gzzX1: return error(-1, "\351\x94\x99\xe8\xaf\xaf\x3a\40{$result["\x6d\x65\163\x73\x61\x67\x65"]}"); goto PvKmf; PvKmf: M_J96: goto QXZVn; QXZVn: $result = @json_decode($result["\143\157\x6e\x74\x65\x6e\164"], true); goto qU4m1; a8mUk: } public function queryOrderStateAction($orderindex) { goto w_103; UEU3z: $m_5Ld = !is_error($result); goto keM5U; keM5U: if ($m_5Ld) { goto a3i7c; } goto hkHJS; w_103: $this->params["\141\160\x69\156\x61\155\x65"] = "\x4f\160\x65\x6e\x5f\161\165\x65\162\171\117\162\144\145\162\x53\164\x61\164\x65"; goto rZBF8; YdSzi: return $result; goto Qi5Ob; s0mJs: a3i7c: goto iv2Bf; iv2Bf: $result = @json_decode($result["\x63\157\x6e\x74\145\x6e\164"], true); goto YdSzi; rZBF8: $this->params["\x6f\162\x64\x65\x72\x69\144"] = $orderindex; goto wUqw6; hkHJS: return error(-1, "\xe9\x94\231\xe8\257\257\x3a\x20{$result["\x6d\145\x73\163\x61\147\145"]}"); goto s0mJs; wUqw6: $result = ihttp_post($this->api, $this->params); goto UEU3z; Qi5Ob: } public function queryPrinterStatusAction() { goto ZM6vB; VaIqJ: $result = ihttp_post($this->api, $this->params); goto nLx_k; g9k_Z: YhaIF: goto brnaA; dLVYs: return error(-1, "\351\224\231\xe8\257\xaf\72\40{$result["\155\x65\x73\163\x61\147\x65"]}"); goto g9k_Z; nLx_k: $m_5Ld = !is_error($result); goto PKzbh; QDqNw: return $result; goto sRM57; PKzbh: if ($m_5Ld) { goto YhaIF; } goto dLVYs; zLMyh: $this->params["\163\x6e"] = $this->sn; goto VaIqJ; ZM6vB: $this->params["\141\160\151\156\141\155\x65"] = "\x4f\x70\x65\156\x5f\x71\165\145\x72\171\x50\162\x69\156\x74\x65\x72\123\x74\x61\164\165\163"; goto zLMyh; brnaA: $result = @json_decode($result["\143\x6f\x6e\164\145\x6e\x74"], true); goto QDqNw; sRM57: } }